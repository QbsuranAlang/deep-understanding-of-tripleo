## OverCloud部署解析

把物理网络配置好，镜像以及裸机信息录入系统，设置好Metadata，一切准备好之后，就可以开始部署OverCloud了，部署OverCloud非常简单，只需要执行一条命令：

```
openstack overcloud deploy --templates /usr/share/openstack-tripleo-heat-templates/ \
  -r /home/stack/templates/roles/roles_data.yaml \
  -e /home/stack/templates/environments/low-memory-usage.yaml \
  -e /home/stack/templates/environments/environment.yaml
```

这条命令背后到底发生了什么？在前面概览中介绍了部署OverCloud的过程其实是在跑Heat Template的过程，反映到Heat里，就是要创建一个stack，所以这个命令做的大部分工作都是在为创建这个stack做准备，创建环境变量，解析Template，生成自定义的Role，传递各种参数，然后创建stack，整体的数据流如下图：

![](/assets/overcloud_dataflow.png)

在部署OverCloud之前，首先会生成一个Plan，在前面介绍过，Heat的模板是在`tripleo-heat-templates`这个项目中定义的，这个里面有一些模板里面是有模板变量的，比如自定义的Role，需要根据参数进行解析，这些模板被解析完之后，会被上传到Swift里一个以将要创建的Heat Stack的名字命名的container里，默认为`overcloud`，在创建Heat Stack时，Heat所用到的模板，就是直接从Swift里获取的，所以这个过程大致如下：

* 客户端先调用Mistral里面的`tripleo.plan.create_container`这个workflow，在Swift里创建了一个名称为`overcloud`的container；
* 然后客户端直接调用swift接口，将原始模板上传到这个container里；
* 然后开始执行`tripleo.plan_management.v1.create_deployment_plan`这个workflow，这个workflow定义了3个action：
  * `tripleo.plan.create`，将`tripleo-heat-templates`里的`root_template`和`root_environment`存储到Mistral的Environment里，所谓`root_template`就是`overcloud.yaml`这个文件，它是创建这个stack里的最上层的stack，这个stack里又嵌套了非常多的stack，每一个stack都负责做一块事情；`root_environment`则是指的`overcloud-resource-registry-puppet.yaml`这个文件，这个文件是Heat里用到的Environment，定义了Heat里的Resource对应的模板文件；
  * `tripleo.parameters.generate_passwords`，这个action生成了各个服务的密码，即每个服务都会在Keystone里生成一个账户，后面会被配置到各个服务的配置文件中，比如Nova会创建一个名为nova的用户，它的密码就是在这个阶段生成的，这些密码也被上传到了Mistral的Environment里；
  * `tripleo.templates.process`，这个action主要是处理模板，根据指定的变量渲染模板，生成本次部署特定的模板，比如生成自定义的Role，此外，再结合前面的几个action生成的结果，这个action最终生成了创建stack需要使用的参数；
* 上面的准备工作做好之后，就开始执行`tripleo.deployment.v1.deploy_plan`这个workflow，这个workflow就是要实施前面定义的Plan了，其实就是调用heat，结合在这个Plan中定义的模板以及环境变量，开始创建这个stack了，部署整个overcloud的过程就是创建这个stack的过程，这个stack又嵌套了非常多的子stack，比如创建裸机，部署系统，配置系统，这些都被封装成了stack，通过执行这一个个stack，来完成部署过程。创建stack时传递的参数，请看附录。
* 等Heat Stack创建完成之后，会上传overcloudrc文件到各个服务器，整个部署过程就完成了。

可以看到，创建stack的过程，也就是`tripleo-heat-templates`这个项目，是整个TripleO的最核心部分，它决定了最终部署出来的集群是什么样子，应该如何配置各个服务，后面我们会专门介绍下TripleO的Template。

### 附录

```
(Pdb) pp stack_args
{'environment': {u'parameter_defaults': {u'AdminPassword': u'ustack',
                                         u'AdminToken': u'kXBYuxdjP4kEuqnvhxTxN9Ctp',
                                         u'AodhPassword': u'YYFUDNHmRb2KU7H7wvGagXcgf',
                                         u'ApacheMaxRequestWorkers': 32,
                                         u'ApacheServerLimit': 32,
                                         u'BarbicanPassword': u'hCbsuJQquvgnUEYGNpNNFWUGc',
                                         u'BondInterfaceOvsOptions': u'mode=4 lacp_rate=1 updelay=1000 miimon=100 xmit_hash_policy=layer3+4',
                                         u'CeilometerMeteringSecret': u'DDwvatrj2aEe2qtKms3UBYMEw',
                                         u'CeilometerPassword': u'ffYcEZeXA3c94aqMDKTmPGD3P',
                                         u'CeilometerWorkers': 2,
                                         u'CephAdminKey': u'AQBw2fVYAAAAABAAyb2opa1UcuQePeQSAnkEGw==',
                                         u'CephClientKey': u'AQBw2fVYAAAAABAABECYVKhVCfnD5UaeqC0HRw==',
                                         u'CephClusterFSID': u'b6a87336-2417-11e7-a990-ecf4bbd9888c',
                                         u'CephMonKey': u'AQBw2fVYAAAAABAAJ008s4/ye0dYbxFiPa0iIA==',
                                         u'CephRgwKey': u'AQBw2fVYAAAAABAAbcJS1HQqi6rPo/g0jHpEcw==',
                                         u'CinderBackupBackend': u'ceph',
                                         u'CinderEnableIscsiBackend': False,
                                         u'CinderEnableRbdBackend': True,
                                         u'CinderPassword': u'PvtMKNsnh73pTUuAP2BVYtpzg',
                                         u'CinderWorkers': 1,
                                         u'ComputeCount': 3,
                                         u'ComputeServices': [u'OS::TripleO::Services::CACerts',
                                                              u'OS::TripleO::Services::CephOSD',
                                                              u'OS::TripleO::Services::CephClient',
                                                              u'OS::TripleO::Services::CephExternal',
                                                              u'OS::TripleO::Services::Timezone',
                                                              u'OS::TripleO::Services::Ntp',
                                                              u'OS::TripleO::Services::Snmp',
                                                              u'OS::TripleO::Services::NovaCompute',
                                                              u'OS::TripleO::Services::NovaLibvirt',
                                                              u'OS::TripleO::Services::Kernel',
                                                              u'OS::TripleO::Services::ComputeNeutronCorePlugin',
                                                              u'OS::TripleO::Services::ComputeNeutronOvsAgent',
                                                              u'OS::TripleO::Services::ComputeCeilometerAgent',
                                                              u'OS::TripleO::Services::ComputeNeutronL3Agent',
                                                              u'OS::TripleO::Services::ComputeNeutronMetadataAgent',
                                                              u'OS::TripleO::Services::TripleoPackages',
                                                              u'OS::TripleO::Services::TripleoFirewall',
                                                              u'OS::TripleO::Services::NeutronSriovAgent',
                                                              u'OS::TripleO::Services::OpenDaylightOvs',
                                                              u'OS::TripleO::Services::SensuClient',
                                                              u'OS::TripleO::Services::FluentdClient',
                                                              u'OS::TripleO::Services::VipHosts'],
                                         u'ControlPlaneDefaultRoute': u'10.0.161.1',
                                         u'ControlPlaneIP': u'10.0.161.40',
                                         u'ControlPlaneSubnetCidr': u'24',
                                         u'ControllerCount': 3,
                                         u'ControllerExtraConfig': {u'horizon::keystone_multidomain_support': u'true',
                                                                    u'nova::network::neutron::neutron_url_timeout': u'60'},
                                         u'ControllerIPs': {u'external': [u'10.0.166.31',
                                                                          u'10.0.166.32',
                                                                          u'10.0.166.33'],
                                                            u'internal_api': [u'10.0.162.31',
                                                                              u'10.0.162.32',
                                                                              u'10.0.162.33'],
                                                            u'management': [u'10.0.160.31',
                                                                            u'10.0.160.32',
                                                                            u'10.0.160.33'],
                                                            u'storage': [u'10.0.163.31',
                                                                         u'10.0.163.32',
                                                                         u'10.0.163.33'],
                                                            u'storage_mgmt': [u'10.0.164.31',
                                                                              u'10.0.164.32',
                                                                              u'10.0.164.33'],
                                                            u'tenant': [u'10.0.165.31',
                                                                        u'10.0.165.32',
                                                                        u'10.0.165.33']},
                                         u'ControllerServices': [u'OS::TripleO::Services::CACerts',
                                                                 u'OS::TripleO::Services::CephMon',
                                                                 u'OS::TripleO::Services::CephExternal',
                                                                 u'OS::TripleO::Services::CephRgw',
                                                                 u'OS::TripleO::Services::CinderApi',
                                                                 u'OS::TripleO::Services::CinderBackup',
                                                                 u'OS::TripleO::Services::CinderScheduler',
                                                                 u'OS::TripleO::Services::CinderVolume',
                                                                 u'OS::TripleO::Services::Core',
                                                                 u'OS::TripleO::Services::Kernel',
                                                                 u'OS::TripleO::Services::Keystone',
                                                                 u'OS::TripleO::Services::GlanceApi',
                                                                 u'OS::TripleO::Services::GlanceRegistry',
                                                                 u'OS::TripleO::Services::HeatApi',
                                                                 u'OS::TripleO::Services::HeatApiCfn',
                                                                 u'OS::TripleO::Services::HeatApiCloudwatch',
                                                                 u'OS::TripleO::Services::HeatEngine',
                                                                 u'OS::TripleO::Services::MySQL',
                                                                 u'OS::TripleO::Services::NeutronDhcpAgent',
                                                                 u'OS::TripleO::Services::NeutronL3Agent',
                                                                 u'OS::TripleO::Services::NeutronMetadataAgent',
                                                                 u'OS::TripleO::Services::NeutronApi',
                                                                 u'OS::TripleO::Services::NeutronCorePlugin',
                                                                 u'OS::TripleO::Services::NeutronOvsAgent',
                                                                 u'OS::TripleO::Services::RabbitMQ',
                                                                 u'OS::TripleO::Services::HAproxy',
                                                                 u'OS::TripleO::Services::Keepalived',
                                                                 u'OS::TripleO::Services::Memcached',
                                                                 u'OS::TripleO::Services::Pacemaker',
                                                                 u'OS::TripleO::Services::Redis',
                                                                 u'OS::TripleO::Services::NovaConductor',
                                                                 u'OS::TripleO::Services::MongoDb',
                                                                 u'OS::TripleO::Services::NovaApi',
                                                                 u'OS::TripleO::Services::NovaMetadata',
                                                                 u'OS::TripleO::Services::NovaScheduler',
                                                                 u'OS::TripleO::Services::NovaConsoleauth',
                                                                 u'OS::TripleO::Services::NovaVncProxy',
                                                                 u'OS::TripleO::Services::Ntp',
                                                                 u'OS::TripleO::Services::SwiftProxy',
                                                                 u'OS::TripleO::Services::SwiftStorage',
                                                                 u'OS::TripleO::Services::SwiftRingBuilder',
                                                                 u'OS::TripleO::Services::Snmp',
                                                                 u'OS::TripleO::Services::Timezone',
                                                                 u'OS::TripleO::Services::CeilometerApi',
                                                                 u'OS::TripleO::Services::CeilometerCollector',
                                                                 u'OS::TripleO::Services::CeilometerExpirer',
                                                                 u'OS::TripleO::Services::CeilometerAgentCentral',
                                                                 u'OS::TripleO::Services::CeilometerAgentNotification',
                                                                 u'OS::TripleO::Services::Horizon',
                                                                 u'OS::TripleO::Services::GnocchiApi',
                                                                 u'OS::TripleO::Services::GnocchiMetricd',
                                                                 u'OS::TripleO::Services::GnocchiStatsd',
                                                                 u'OS::TripleO::Services::ManilaApi',
                                                                 u'OS::TripleO::Services::ManilaScheduler',
                                                                 u'OS::TripleO::Services::ManilaBackendGeneric',
                                                                 u'OS::TripleO::Services::ManilaBackendNetapp',
                                                                 u'OS::TripleO::Services::ManilaBackendCephFs',
                                                                 u'OS::TripleO::Services::ManilaShare',
                                                                 u'OS::TripleO::Services::AodhApi',
                                                                 u'OS::TripleO::Services::AodhEvaluator',
                                                                 u'OS::TripleO::Services::AodhNotifier',
                                                                 u'OS::TripleO::Services::AodhListener',
                                                                 u'OS::TripleO::Services::SaharaApi',
                                                                 u'OS::TripleO::Services::SaharaEngine',
                                                                 u'OS::TripleO::Services::IronicApi',
                                                                 u'OS::TripleO::Services::IronicConductor',
                                                                 u'OS::TripleO::Services::NovaIronic',
                                                                 u'OS::TripleO::Services::TripleoPackages',
                                                                 u'OS::TripleO::Services::TripleoFirewall',
                                                                 u'OS::TripleO::Services::OpenDaylightApi',
                                                                 u'OS::TripleO::Services::OpenDaylightOvs',
                                                                 u'OS::TripleO::Services::SensuClient',
                                                                 u'OS::TripleO::Services::FluentdClient',
                                                                 u'OS::TripleO::Services::VipHosts'],
                                         u'DeployIdentifier': 1492507062,
                                         u'DnsServers': [u'114.114.114.114'],
                                         u'EC2MetadataIp': u'10.0.161.2',
                                         u'EnablePackageInstall': False,
                                         u'ExternalAllocationPools': [{u'end': u'10.0.166.70',
                                                                       u'start': u'10.0.166.31'}],
                                         u'ExternalInterfaceDefaultRoute': u'10.0.166.1',
                                         u'ExternalNetCidr': u'10.0.166.0/24',
                                         u'ExternalNetworkVip': u'10.0.166.40',
                                         u'ExternalNetworkVlanID': 4066,
                                         u'ExtraConfig': {u'ceph::conf::args': {u'global/max_open_files': {u'value': 131072}},
                                                          u'ceph::profile::params::osd_journal_size': 15360,
                                                          u'ceph::profile::params::osd_pool_default_pg_num': 33,
                                                          u'ceph::profile::params::osd_pool_default_pgp_num': 33,
                                                          u'ceph::profile::params::osd_pool_default_size': 2,
                                                          u'ceph::profile::params::osds': {u'/dev/sda': {}}},
                                         u'GlanceBackend': u'rbd',
                                         u'GlancePassword': u'x9fADFuhxJB7jsaHPMXxTyMYf',
                                         u'GlanceWorkers': 1,
                                         u'GnocchiBackend': u'rbd',
                                         u'GnocchiMetricdWorkers': 4,
                                         u'GnocchiPassword': u'73z9ujuxZABA2MRErTsGnwTyC',
                                         u'HAProxyStatsPassword': u'Vw2YQm9tCfd2TZZEkZyyck6YE',
                                         u'HeatPassword': u'Rnfd3M9zcvYaHz3zakM8N4Jv8',
                                         u'HeatStackDomainAdminPassword': u'dkFeUxrEKQsueGdknBeeyfzEv',
                                         u'HeatWorkers': 1,
                                         u'InternalApiAllocationPools': [{u'end': u'10.0.162.70',
                                                                          u'start': u'10.0.162.31'}],
                                         u'InternalApiNetCidr': u'10.0.162.0/24',
                                         u'InternalApiNetworkVip': u'10.0.162.40',
                                         u'InternalApiNetworkVlanID': 4062,
                                         u'IronicPassword': u'GEEN493TZXeD3K7H8AvBu96aQ',
                                         u'KeystoneCACertificate': u'-----BEGIN CERTIFICATE-----\nMIIDNzCCAh+gAwIBAgIBATANBgkqhkiG9w0BAQUFADBTMQswCQYDVQQGEwJYWDEO\nMAwGA1UECBMFVW5zZXQxDjAMBgNVBAcTBVVuc2V0MQ4wDAYDVQQKEwVVbnNldDEU\nMBIGA1UEAxMLS2V5c3RvbmUgQ0EwHhcNMTcwNDE4MDkxNzAxWhcNMjcwNDE2MDkx\nNzAxWjBTMQswCQYDVQQGEwJYWDEOMAwGA1UECBMFVW5zZXQxDjAMBgNVBAcTBVVu\nc2V0MQ4wDAYDVQQKEwVVbnNldDEUMBIGA1UEAxMLS2V5c3RvbmUgQ0EwggEiMA0G\nCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDahA4vzWqEX5auqNXXCz9sUW179GoL\ngG6Mxh1j3mAvlutyN4+EuCIKJlu3yD5lEOHQW9/weNAU3UxEIhrAA4Z/cvcKzza1\nCFa/alAc0C1xq1z7hkSyh2ElMvD4EJVCdWWZpkBP0xFfpbpLkV5yUYmab06pJk6o\njCQd01J8lLGJg4GS1cnrb/m0WKDGRjnVZY8oGaUghW9QzynTfBemkX0rhUVOU/9T\nPW3u4WR0RfTAyBszBh0SpTl0GpGKHIDlhkQ8DZEz9qpefbRNNGVv2PoaKfEsE3xI\ni687J0Qyv2VNTNjRBaK4bn/rrt7E4fVrzwQW1O8MbMHR9larC9q1NXNNAgMBAAGj\nFjAUMBIGA1UdEwEB/wQIMAYBAf8CAQAwDQYJKoZIhvcNAQEFBQADggEBAGGqGjmv\nEli6BFEPKQhF0Q5CBMJ7wyAZPafK8hUv6uskWaXuBsdsoIYViEXEROMyL7mfUH/N\n816+pk+Xsou6Y1a4HOczsKM7lvsR5iDL3bQV120lhWxnKRzCNkg/Bq4Ba7Fg8fZc\nnhM/Sv1xkmTfTkNb3AfNixGI0ucavUaU9bE9MTOeuEVW+vgdg1O2+p7/E4HvgM0b\np74/N+rgtrzg+kW1kyraASHChWhgjVgG0/49cwglfM1YsX6W57XXDjKOCt+c0ug1\nC80Vz4UyPTt/LT4qgJ4Ny8XJ51KQJ7Kae8fGBagUA7eOh8zabsjjRwX8Nf6TL6Ye\nJCkOJRhHMxEn8n8=\n-----END CERTIFICATE-----\n',
                                         u'KeystoneCredential0': u'mCQQ3nc1bXDJBKsXi0lcpvBn56XFlQDEbxH1PhWlmxU=',
                                         u'KeystoneCredential1': u'OLN4wzJFfiiAkBUJ_djjAfXk0e6fgROPIS8yiblMwMw=',
                                         u'KeystoneSigningCertificate': u'-----BEGIN CERTIFICATE-----\nMIIDJDCCAgygAwIBAgIBAjANBgkqhkiG9w0BAQUFADBTMQswCQYDVQQGEwJYWDEO\nMAwGA1UECBMFVW5zZXQxDjAMBgNVBAcTBVVuc2V0MQ4wDAYDVQQKEwVVbnNldDEU\nMBIGA1UEAxMLS2V5c3RvbmUgQ0EwHhcNMTcwNDE4MDkxNzAxWhcNMjcwNDE2MDkx\nNzAxWjBYMQswCQYDVQQGEwJYWDEOMAwGA1UECBMFVW5zZXQxDjAMBgNVBAcTBVVu\nc2V0MQ4wDAYDVQQKEwVVbnNldDEZMBcGA1UEAxMQS2V5c3RvbmUgU2lnbmluZzCC\nASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK+iVonWKDE5EhPC9wOV9ohn\nfa2oc6c7i4EbJ9SbXQbcEx9Ovp0FRZ4QfxQd/dR2qEfGehpknTmgksbhdX5M40gR\nhlQ47HbxsXQVbVTs6jIc2a2J35whbqwaF4FvC5K0SxMQKhqDJ6VhDTZsMpZPXTkB\nip1Idjf2ach/g4PCE5KGabG8cJdq8EPmGQGzQmjzloSdNKx6KFdtwn8tWb71aBow\n/k3bgolo19mMH5UPwPNshrcTp13n4BKUZNHTxa7I8p202IsYzL0MDMpicA+HQSUm\n299U/ZcOOF3zsQ7eAXuMpvYNuOIEpddhd8C0E6EsSU5Ze8loeCTwBhIvG7WrcVUC\nAwEAATANBgkqhkiG9w0BAQUFAAOCAQEAAmw/HIDySRZtPFgIbSqQ8P7YmfDOJpmV\nhroaaWwVjHKE9MFpjVIJXDLrt6k+Zr5L4QEbRhwpKr01PJhakXp4yU2tC3/OTYxn\nVMgx8D+ONVGiwuWxhTDtmmt3GlZ6ysbI6S6Xb+Z4SYSi5t4qeiVyoE1fRpPsoXgs\nH3+BuBsxkpECFHb7/H/zNS2yP/bIiGEgYUSKzWacThoUymLRaYNDs8p9XCmi18e7\nCqrj8D+I8uicO02I8tvUt6PLuRDoqADlOxzCRfPKWn6AzSMeF/iD/F9Uaafqdxmo\nyvmnHJnq5UOo1Lj6jIcMQmOKPwoXkbcqMt/AEQhF0Yc3woFEvUcyaA==\n-----END CERTIFICATE-----\n',
                                         u'KeystoneSigningKey': u'-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCvolaJ1igxORIT\nwvcDlfaIZ32tqHOnO4uBGyfUm10G3BMfTr6dBUWeEH8UHf3UdqhHxnoaZJ05oJLG\n4XV+TONIEYZUOOx28bF0FW1U7OoyHNmtid+cIW6sGheBbwuStEsTECoagyelYQ02\nbDKWT105AYqdSHY39mnIf4ODwhOShmmxvHCXavBD5hkBs0Jo85aEnTSseihXbcJ/\nLVm+9WgaMP5N24KJaNfZjB+VD8DzbIa3E6dd5+ASlGTR08WuyPKdtNiLGMy9DAzK\nYnAPh0ElJtvfVP2XDjhd87EO3gF7jKb2DbjiBKXXYXfAtBOhLElOWXvJaHgk8AYS\nLxu1q3FVAgMBAAECggEBAJJBDustCL8klScbnXLA+FDSTVfFBLnn3d2e7WYgEjFa\nJhpWCmjbMQPVHN11tB+ux6ctYhSEYGDSlCdFLAAGquUioseTt2W9ElZmWWr09njQ\niXv3adusA2sRNy2zeOGrfTDcrxLw0Jzo2oXNR7rfT/Pekr0y0C795Uzu0mdvv7it\nD5KwBbMW4y3edX5lO5XdGtUmH7awrHIYhb/o2MzP6aiRFB2Dy5KlPP/NBHOsABBo\nK7NK9jyjEPC7U6Yict0CyWsLej+1WZd702gf8WTXiS7yjzL2ryTivQea9EgmeiP+\n7e9cKvDhQc3SeRuoHn2TZ91xH6+b6oGBwICuzoar/2kCgYEA4cDgmcJc6DsUIWLW\nGDI5Risuv+IXCCxE2x2m23jEfxNI5IbAxfkDPEpqfWMGNIQSLYGh4s7oCPJWWarA\n4bYuxA3Uf7kWO+Ri5DE1/8l6icMqlc6IU3SHQgSq1HItdjl8xkq4SjG6k7QNnydN\ngibTjC6MubbiMidiuici8cawn28CgYEAxypq7/ONWZYmDxb3PKTPYcxYGG7IK9X8\n1qRSF8LmP38S+N0ftCy4qBj/CFAJvMlhELfsOubme8IJ9Eq0ivpxV1ExUJirrN2g\nX4KOpiiklCbo4+p5vR2+OKN+kD+vSROxPoEWUeQfY9kZBwnOnuLI60dK2l4f48aJ\nPlwGn3YTGXsCgYBeQo6FJOZuANzy47XI/I91gOpQLDK5suI9KzBUSySgeojhAnLT\nNpnnPpsgJ4ybuNluLsZNUV8I/UaYwfcvR0ZXjf7AJaPm9gFkjjehyZpkkxzg2A+L\n6QfgxNofQl1BE9fJY8F3GTRyH6fgYCS4x0VlLrqLgJUJo/BREa5BjViJ+QKBgF57\nXvOqBJpFQpTR/kPEo6TvfbNJiqhRAXsJxPAEw5nHvMZWkB23QXptMT9OSPBIUEXQ\nGr7untSC/pnnfrKXkIEtwUlMw9Rj5xqoIufsS/cEZmMI7uuqWn0gAoCH1a3DK8hN\nELuUjtedO+Q84Mo7J7mFvprNIC+8FYuBuJqZNwJVAoGAerIhUg2QZJgmcFA6zDuP\nf6FpTQqYWOqk1nCVunILs6ZS+vjk/X21Un1/h3mvlxUrS9bKjamu8ttzYIqSww74\nEDq9pu9SNZzYkNjBb5dnqdZgegNjmpReq97klGMOxEY8rHanDuYNzngK8XtnrWG9\nXndlMyusZn3nj16IFn2vYk0=\n-----END PRIVATE KEY-----\n',
                                         u'KeystoneWorkers': 1,
                                         u'ManagementAllocationPools': [{u'end': u'10.0.160.70',
                                                                         u'start': u'10.0.160.31'}],
                                         u'ManagementInterfaceDefaultRoute': u'10.0.160.1',
                                         u'ManagementNetCidr': u'10.0.160.0/24',
                                         u'ManilaPassword': u'NpMNZ2jpGKh6s7CydW4wYCAWA',
                                         u'MistralPassword': u'qFfK8v4uaJPCNrNewPCuBbvb8',
                                         u'MysqlClustercheckPassword': u'TzqPDpFVtuNMgfh3FzcxDk8nU',
                                         u'NeutronBridgeMappings': u'datacentre:br-ex',
                                         u'NeutronDhcpAgentsPerNetwork': 1,
                                         u'NeutronEnableIsolatedMetadata': True,
                                         u'NeutronExternalNetworkBridge': u"''",
                                         u'NeutronFlatNetworks': u'datacentre',
                                         u'NeutronMetadataProxySharedSecret': u'hwewKpkfap8hzPGpHjf4KEVKM',
                                         u'NeutronNetworkVLANRanges': u'datacentre:4068:4075',
                                         u'NeutronPassword': u'8CNAdwQt4H9BNcy8VXXr69HbJ',
                                         u'NeutronTenantNetwork': u'vxlan',
                                         u'NeutronTunnelTypes': u'vxlan',
                                         u'NeutronWorkers': 4,
                                         u'NovaComputeIPs': {u'internal_api': [u'10.0.162.51',
                                                                               u'10.0.162.52',
                                                                               u'10.0.162.53'],
                                                             u'management': [u'10.0.160.51',
                                                                             u'10.0.160.52',
                                                                             u'10.0.160.53'],
                                                             u'storage': [u'10.0.163.51',
                                                                          u'10.0.163.52',
                                                                          u'10.0.163.53'],
                                                             u'storage_mgmt': [u'10.0.164.51',
                                                                               u'10.0.164.52',
                                                                               u'10.0.164.53'],
                                                             u'tenant': [u'10.0.165.51',
                                                                         u'10.0.165.52',
                                                                         u'10.0.165.53']},
                                         u'NovaEnableRbdBackend': True,
                                         u'NovaPassword': u'Qcje4FT94gHyFgsMrmA8DZYr3',
                                         u'NovaWorkers': 2,
                                         u'NtpServer': u'10.0.161.2',
                                         u'OvercloudComputeFlavor': u'compute',
                                         u'OvercloudControlFlavor': u'control',
                                         u'RabbitPassword': u'eGZx87pV3N7Fe4DB67g2CGCPC',
                                         u'RedisPassword': u'U2VAdMYGfbQFWUJ8cgTBBjkhG',
                                         u'SaharaPassword': u'cZX8buVtVmPgbfqdRkGdVBRxf',
                                         u'SaharaWorkers': 1,
                                         u'ServiceVips': {u'redis': u'10.0.162.41'},
                                         u'SnmpdReadonlyUserPassword': u'3f6a84fb6e9910d21b014c074255ba8ceb2004fa',
                                         u'SoftwareConfigTransport': u'POLL_TEMP_URL',
                                         u'StackAction': u'CREATE',
                                         u'StorageAllocationPools': [{u'end': u'10.0.163.70',
                                                                      u'start': u'10.0.163.31'}],
                                         u'StorageMgmtAllocationPools': [{u'end': u'10.0.164.70',
                                                                          u'start': u'10.0.164.31'}],
                                         u'StorageMgmtNetCidr': u'10.0.164.0/24',
                                         u'StorageMgmtNetworkVip': u'10.0.164.40',
                                         u'StorageMgmtNetworkVlanID': 4064,
                                         u'StorageNetCidr': u'10.0.163.0/24',
                                         u'StorageNetworkVip': u'10.0.163.40',
                                         u'StorageNetworkVlanID': 4063,
                                         u'SwiftHashSuffix': u'P3sC9B9xpwm4FDuMDYfcGxDJ8',
                                         u'SwiftPassword': u'qVgCpRwWgcPv2ee9TEmdM4hMM',
                                         u'SwiftWorkers': 1,
                                         u'TenantAllocationPools': [{u'end': u'10.0.165.70',
                                                                     u'start': u'10.0.165.31'}],
                                         u'TenantNetCidr': u'10.0.165.0/24',
                                         u'TenantNetworkVlanID': 4065,
                                         u'TrovePassword': u'BP7NH9W3gRkGvgYbzjYTwxpmY',
                                         u'UpdateIdentifier': u'',
                                         u'ZaqarPassword': u'XjDKgZzjXTEvhU6jQCPbQjbbG',
                                         u'node_admin_extra_ssh_keys': u''},
                 u'resource_registry': {u'OS::TripleO::AllNodes::SoftwareConfig': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/all-nodes-config.yaml',
                                        u'OS::TripleO::AllNodes::Validation': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/all-nodes-validation.yaml',
                                        u'OS::TripleO::AllNodesExtraConfig': u'OS::Heat::None',
                                        u'OS::TripleO::Compute': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/compute-role.yaml',
                                        u'OS::TripleO::Compute::Net::SoftwareConfig': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/home/stack/templates/nic-configs/compute.yaml',
                                        u'OS::TripleO::Compute::Ports::ExternalPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml',
                                        u'OS::TripleO::Compute::Ports::InternalApiPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/internal_api_from_pool.yaml',
                                        u'OS::TripleO::Compute::Ports::ManagementPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/management_from_pool.yaml',
                                        u'OS::TripleO::Compute::Ports::StorageMgmtPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/storage_mgmt_from_pool.yaml',
                                        u'OS::TripleO::Compute::Ports::StoragePort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/storage_from_pool.yaml',
                                        u'OS::TripleO::Compute::Ports::TenantPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/tenant_from_pool.yaml',
                                        u'OS::TripleO::ComputeConfig': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/compute-config.yaml',
                                        u'OS::TripleO::ComputeExtraConfigPre': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/extraconfig/pre_deploy/default.yaml',
                                        u'OS::TripleO::ComputePostDeploySteps': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/post.yaml',
                                        u'OS::TripleO::Controller': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/controller-role.yaml',
                                        u'OS::TripleO::Controller::Net::SoftwareConfig': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/home/stack/templates/nic-configs/controller.yaml',
                                        u'OS::TripleO::Controller::Ports::ExternalPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/external_from_pool.yaml',
                                        u'OS::TripleO::Controller::Ports::InternalApiPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/internal_api_from_pool.yaml',
                                        u'OS::TripleO::Controller::Ports::ManagementPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/management_from_pool.yaml',
                                        u'OS::TripleO::Controller::Ports::RedisVipPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/vip.yaml',
                                        u'OS::TripleO::Controller::Ports::StorageMgmtPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/storage_mgmt_from_pool.yaml',
                                        u'OS::TripleO::Controller::Ports::StoragePort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/storage_from_pool.yaml',
                                        u'OS::TripleO::Controller::Ports::TenantPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/tenant_from_pool.yaml',
                                        u'OS::TripleO::ControllerConfig': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/controller-config-pacemaker.yaml',
                                        u'OS::TripleO::ControllerExtraConfigPre': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/extraconfig/pre_deploy/default.yaml',
                                        u'OS::TripleO::ControllerPostDeploySteps': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/post.yaml',
                                        u'OS::TripleO::DefaultPasswords': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/default_passwords.yaml',
                                        u'OS::TripleO::EndpointMap': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/network/endpoints/endpoint_map.yaml',
                                        u'OS::TripleO::Hosts::SoftwareConfig': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/hosts-config.yaml',
                                        u'OS::TripleO::LoggingConfiguration': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/logging/fluentd-config.yaml',
                                        u'OS::TripleO::Network': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/network/networks.yaml',
                                        u'OS::TripleO::Network::External': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/external.yaml',
                                        u'OS::TripleO::Network::ExtraConfig': u'OS::Heat::None',
                                        u'OS::TripleO::Network::InternalApi': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/internal_api.yaml',
                                        u'OS::TripleO::Network::Management': u'OS::Heat::None',
                                        u'OS::TripleO::Network::Ports::ExternalVipPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml',
                                        u'OS::TripleO::Network::Ports::InternalApiVipPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml',
                                        u'OS::TripleO::Network::Ports::NetIpListMap': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/network/ports/net_ip_list_map.yaml',
                                        u'OS::TripleO::Network::Ports::NetIpMap': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/network/ports/net_ip_map.yaml',
                                        u'OS::TripleO::Network::Ports::NetVipMap': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/net_vip_map_external.yaml',
                                        u'OS::TripleO::Network::Ports::RedisVipPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/from_service.yaml',
                                        u'OS::TripleO::Network::Ports::StorageMgmtVipPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml',
                                        u'OS::TripleO::Network::Ports::StorageVipPort': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/ports/noop.yaml',
                                        u'OS::TripleO::Network::Storage': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/storage.yaml',
                                        u'OS::TripleO::Network::StorageMgmt': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/storage_mgmt.yaml',
                                        u'OS::TripleO::Network::Tenant': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/network/tenant.yaml',
                                        u'OS::TripleO::NodeAdminUserData': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/firstboot/userdata_heat_admin.yaml',
                                        u'OS::TripleO::NodeExtraConfig': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/extraconfig/pre_deploy/default.yaml',
                                        u'OS::TripleO::NodeExtraConfigPost': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/extraconfig/post_deploy/default.yaml',
                                        u'OS::TripleO::NodeTLSCAData': u'OS::Heat::None',
                                        u'OS::TripleO::NodeTLSData': u'OS::Heat::None',
                                        u'OS::TripleO::NodeUserData': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/home/stack/templates/firstboot/wipe-disks.yaml',
                                        u'OS::TripleO::PostDeploySteps': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/post.yaml',
                                        u'OS::TripleO::Server': u'OS::Nova::Server',
                                        u'OS::TripleO::ServiceNetMap': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/network/service_net_map.yaml',
                                        u'OS::TripleO::Services': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/services.yaml',
                                        u'OS::TripleO::Services::AodhApi': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/aodh-api.yaml',
                                        u'OS::TripleO::Services::AodhEvaluator': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/aodh-evaluator.yaml',
                                        u'OS::TripleO::Services::AodhListener': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/aodh-listener.yaml',
                                        u'OS::TripleO::Services::AodhNotifier': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/aodh-notifier.yaml',
                                        u'OS::TripleO::Services::Apache': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/apache.yaml',
                                        u'OS::TripleO::Services::BlockStorageCinderVolume': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/cinder-volume.yaml',
                                        u'OS::TripleO::Services::CACerts': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/ca-certs.yaml',
                                        u'OS::TripleO::Services::CeilometerAgentCentral': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/ceilometer-agent-central.yaml',
                                        u'OS::TripleO::Services::CeilometerAgentNotification': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/ceilometer-agent-notification.yaml',
                                        u'OS::TripleO::Services::CeilometerApi': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/ceilometer-api.yaml',
                                        u'OS::TripleO::Services::CeilometerCollector': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/ceilometer-collector.yaml',
                                        u'OS::TripleO::Services::CeilometerExpirer': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/ceilometer-expirer.yaml',
                                        u'OS::TripleO::Services::CephClient': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/puppet/services/ceph-client.yaml',
                                        u'OS::TripleO::Services::CephExternal': u'OS::Heat::None',
                                        u'OS::TripleO::Services::CephMon': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/puppet/services/ceph-mon.yaml',
                                        u'OS::TripleO::Services::CephOSD': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/user-files/usr/share/openstack-tripleo-heat-templates/puppet/services/ceph-osd.yaml',
                                        u'OS::TripleO::Services::CephRgw': u'OS::Heat::None',
                                        u'OS::TripleO::Services::CinderApi': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/cinder-api.yaml',
                                        u'OS::TripleO::Services::CinderBackup': u'OS::Heat::None',
                                        u'OS::TripleO::Services::CinderScheduler': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/cinder-scheduler.yaml',
                                        u'OS::TripleO::Services::CinderVolume': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/pacemaker/cinder-volume.yaml',
                                        u'OS::TripleO::Services::ComputeCeilometerAgent': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/ceilometer-agent-compute.yaml',
                                        u'OS::TripleO::Services::ComputeNeutronCorePlugin': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-plugin-ml2.yaml',
                                        u'OS::TripleO::Services::ComputeNeutronL3Agent': u'OS::Heat::None',
                                        u'OS::TripleO::Services::ComputeNeutronMetadataAgent': u'OS::Heat::None',
                                        u'OS::TripleO::Services::ComputeNeutronOvsAgent': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-ovs-agent.yaml',
                                        u'OS::TripleO::Services::Core': u'OS::Heat::None',
                                        u'OS::TripleO::Services::FluentdClient': u'OS::Heat::None',
                                        u'OS::TripleO::Services::GlanceApi': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/glance-api.yaml',
                                        u'OS::TripleO::Services::GlanceRegistry': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/glance-registry.yaml',
                                        u'OS::TripleO::Services::GnocchiApi': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/gnocchi-api.yaml',
                                        u'OS::TripleO::Services::GnocchiMetricd': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/gnocchi-metricd.yaml',
                                        u'OS::TripleO::Services::GnocchiStatsd': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/gnocchi-statsd.yaml',
                                        u'OS::TripleO::Services::HAproxy': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/pacemaker/haproxy.yaml',
                                        u'OS::TripleO::Services::HeatApi': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/heat-api.yaml',
                                        u'OS::TripleO::Services::HeatApiCfn': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/heat-api-cfn.yaml',
                                        u'OS::TripleO::Services::HeatApiCloudwatch': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/heat-api-cloudwatch.yaml',
                                        u'OS::TripleO::Services::HeatEngine': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/heat-engine.yaml',
                                        u'OS::TripleO::Services::Horizon': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/horizon.yaml',
                                        u'OS::TripleO::Services::IronicApi': u'OS::Heat::None',
                                        u'OS::TripleO::Services::IronicConductor': u'OS::Heat::None',
                                        u'OS::TripleO::Services::Keepalived': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/keepalived.yaml',
                                        u'OS::TripleO::Services::Kernel': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/kernel.yaml',
                                        u'OS::TripleO::Services::Keystone': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/keystone.yaml',
                                        u'OS::TripleO::Services::ManilaApi': u'OS::Heat::None',
                                        u'OS::TripleO::Services::ManilaBackendCephFs': u'OS::Heat::None',
                                        u'OS::TripleO::Services::ManilaBackendGeneric': u'OS::Heat::None',
                                        u'OS::TripleO::Services::ManilaBackendNetapp': u'OS::Heat::None',
                                        u'OS::TripleO::Services::ManilaScheduler': u'OS::Heat::None',
                                        u'OS::TripleO::Services::ManilaShare': u'OS::Heat::None',
                                        u'OS::TripleO::Services::Memcached': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/memcached.yaml',
                                        u'OS::TripleO::Services::MistralApi': u'OS::Heat::None',
                                        u'OS::TripleO::Services::MistralEngine': u'OS::Heat::None',
                                        u'OS::TripleO::Services::MistralExecutor': u'OS::Heat::None',
                                        u'OS::TripleO::Services::MongoDb': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/database/mongodb.yaml',
                                        u'OS::TripleO::Services::MySQL': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/pacemaker/database/mysql.yaml',
                                        u'OS::TripleO::Services::NeutronApi': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-api.yaml',
                                        u'OS::TripleO::Services::NeutronCorePlugin': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-plugin-ml2.yaml',
                                        u'OS::TripleO::Services::NeutronCorePluginML2OVN': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-plugin-ml2-ovn.yaml',
                                        u'OS::TripleO::Services::NeutronCorePluginMidonet': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-midonet.yaml',
                                        u'OS::TripleO::Services::NeutronCorePluginNuage': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-plugin-nuage.yaml',
                                        u'OS::TripleO::Services::NeutronCorePluginOpencontrail': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-plugin-opencontrail.yaml',
                                        u'OS::TripleO::Services::NeutronCorePluginPlumgrid': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-plugin-plumgrid.yaml',
                                        u'OS::TripleO::Services::NeutronDhcpAgent': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-dhcp.yaml',
                                        u'OS::TripleO::Services::NeutronL3Agent': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-l3.yaml',
                                        u'OS::TripleO::Services::NeutronMetadataAgent': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-metadata.yaml',
                                        u'OS::TripleO::Services::NeutronOvsAgent': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-ovs-agent.yaml',
                                        u'OS::TripleO::Services::NeutronServer': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/neutron-api.yaml',
                                        u'OS::TripleO::Services::NeutronSriovAgent': u'OS::Heat::None',
                                        u'OS::TripleO::Services::NovaApi': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/nova-api.yaml',
                                        u'OS::TripleO::Services::NovaCompute': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/nova-compute.yaml',
                                        u'OS::TripleO::Services::NovaConductor': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/nova-conductor.yaml',
                                        u'OS::TripleO::Services::NovaConsoleauth': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/nova-consoleauth.yaml',
                                        u'OS::TripleO::Services::NovaIronic': u'OS::Heat::None',
                                        u'OS::TripleO::Services::NovaLibvirt': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/nova-libvirt.yaml',
                                        u'OS::TripleO::Services::NovaMetadata': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/nova-metadata.yaml',
                                        u'OS::TripleO::Services::NovaScheduler': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/nova-scheduler.yaml',
                                        u'OS::TripleO::Services::NovaVncProxy': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/nova-vnc-proxy.yaml',
                                        u'OS::TripleO::Services::Ntp': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/time/ntp.yaml',
                                        u'OS::TripleO::Services::OpenDaylightApi': u'OS::Heat::None',
                                        u'OS::TripleO::Services::OpenDaylightOvs': u'OS::Heat::None',
                                        u'OS::TripleO::Services::Pacemaker': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/pacemaker.yaml',
                                        u'OS::TripleO::Services::RabbitMQ': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/pacemaker/rabbitmq.yaml',
                                        u'OS::TripleO::Services::Redis': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/pacemaker/database/redis.yaml',
                                        u'OS::TripleO::Services::SaharaApi': u'OS::Heat::None',
                                        u'OS::TripleO::Services::SaharaEngine': u'OS::Heat::None',
                                        u'OS::TripleO::Services::SensuClient': u'OS::Heat::None',
                                        u'OS::TripleO::Services::Snmp': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/snmp.yaml',
                                        u'OS::TripleO::Services::SwiftProxy': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/swift-proxy.yaml',
                                        u'OS::TripleO::Services::SwiftRingBuilder': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/swift-ringbuilder.yaml',
                                        u'OS::TripleO::Services::SwiftStorage': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/swift-storage.yaml',
                                        u'OS::TripleO::Services::Timezone': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/time/timezone.yaml',
                                        u'OS::TripleO::Services::TripleoFirewall': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/tripleo-firewall.yaml',
                                        u'OS::TripleO::Services::TripleoPackages': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/tripleo-packages.yaml',
                                        u'OS::TripleO::Services::VipHosts': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/puppet/services/vip-hosts.yaml',
                                        u'OS::TripleO::SoftwareDeployment': u'OS::Heat::StructuredDeployment',
                                        u'OS::TripleO::Tasks::ComputePostConfig': u'OS::Heat::None',
                                        u'OS::TripleO::Tasks::ComputePreConfig': u'OS::Heat::None',
                                        u'OS::TripleO::Tasks::ControllerPostConfig': u'OS::Heat::None',
                                        u'OS::TripleO::Tasks::ControllerPostPuppet': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/extraconfig/tasks/post_puppet_pacemaker.yaml',
                                        u'OS::TripleO::Tasks::ControllerPostPuppetRestart': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/extraconfig/tasks/post_puppet_pacemaker_restart.yaml',
                                        u'OS::TripleO::Tasks::ControllerPreConfig': u'OS::Heat::None',
                                        u'OS::TripleO::Tasks::ControllerPrePuppet': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/extraconfig/tasks/pre_puppet_pacemaker.yaml',
                                        u'OS::TripleO::Tasks::PackageUpdate': u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/extraconfig/tasks/yum_update.yaml',
                                        u'OS::TripleO::Tasks::UpdateWorkflow': u'OS::Heat::None'}},
 'files': {u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/all-nodes-validation.yaml': '{"outputs": {"OS::stack_id": {"description": "The ID of the AllNodesValidationsImpl resource.", "value": {"get_resource": "AllNodesValidationsImpl"}}}, "heat_template_version": "2015-04-30", "description": "Software Config to drive validations that occur on all nodes. Note, you need the heat-config-script element built into your images, due to the script group below.\\n", "parameters": {"PingTestIps": {"default": "", "type": "string", "description": "A string containing a space separated list of IP addresses used to ping test each available network interface."}}, "resources": {"AllNodesValidationsImpl": {"type": "OS::Heat::SoftwareConfig", "properties": {"inputs": [{"default": {"get_param": "PingTestIps"}, "name": "ping_test_ips"}], "config": {"get_file": "http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/validation-scripts/all-nodes.sh"}, "group": "script"}}}}',
           ......
           u'http://10.0.161.2:8080/v1/AUTH_92f78e422ef44b79b6c5f0fbfabe5e0b/overcloud/validation-scripts/all-nodes.sh': '#!/bin/bash\nset -e\n\nfunction ping_retry() {\n  local IP_ADDR=$1\n  local TIMES=${2:-\'10\'}\n  local COUNT=0\n  local PING_CMD=ping\n  if [[ $IP_ADDR =~ ":" ]]; then\n    PING_CMD=ping6\n  fi\n  until [ $COUNT -ge $TIMES ]; do\n    if $PING_CMD -w 300 -c 1 $IP_ADDR &> /dev/null; then\n      echo "Ping to $IP_ADDR succeeded."\n      return 0\n    fi\n    echo "Ping to $IP_ADDR failed. Retrying..."\n    COUNT=$(($COUNT + 1))\n  done\n  return 1\n}\n\n# For each unique remote IP (specified via Heat) we check to\n# see if one of the locally configured networks matches and if so we\n# attempt a ping test the remote network IP.\nfunction ping_controller_ips() {\n  local REMOTE_IPS=$1\n  for REMOTE_IP in $(echo $REMOTE_IPS | sed -e "s| |\\n|g" | sort -u); do\n    if [[ $REMOTE_IP =~ ":" ]]; then\n      networks=$(ip -6 r | grep -v default | cut -d " " -f 1 | grep -v "unreachable")\n    else\n      networks=$(ip r | grep -v default | cut -d " " -f 1)\n    fi\n    for LOCAL_NETWORK in $networks; do\n      in_network=$(python -c "import ipaddr; net=ipaddr.IPNetwork(\'$LOCAL_NETWORK\'); addr=ipaddr.IPAddress(\'$REMOTE_IP\'); print(addr in net)")\n      if [[ $in_network == "True" ]]; then\n        echo "Trying to ping $REMOTE_IP for local network ${LOCAL_NETWORK}."\n        set +e\n        if ! ping_retry $REMOTE_IP; then\n          echo "FAILURE"\n          echo "$REMOTE_IP is not pingable. Local Network: $LOCAL_NETWORK" >&2\n          exit 1\n        fi\n        set -e\n        echo "SUCCESS"\n      fi\n    done\n  done\n}\n\n# Ping all default gateways. There should only be one\n# if using upstream t-h-t network templates but we test\n# all of them should some manual network config have\n# multiple gateways.\nfunction ping_default_gateways() {\n  DEFAULT_GW=$(ip r | grep ^default | cut -d " " -f 3)\n  set +e\n  for GW in $DEFAULT_GW; do\n    echo -n "Trying to ping default gateway ${GW}..."\n    if ! ping_retry $GW; then\n      echo "FAILURE"\n      echo "$GW is not pingable."\n      exit 1\n    fi\n  done\n  set -e\n  echo "SUCCESS"\n}\n\nping_controller_ips "$ping_test_ips"\nping_default_gateways\n'},
 'stack_name': u'overcloud',
 'template': {u'description': u'Deploy an OpenStack environment, consisting of several node types (roles), Controller, Compute, BlockStorage, SwiftStorage and CephStorage. The Storage roles enable independent scaling of the storage components, but the minimal deployment is one Controller and one Compute node.\n',
              u'heat_template_version': u'2016-10-14',
              u'outputs': {u'AodhInternalVip': {u'description': u'VIP for Aodh API internal endpoint',
                                                u'value': {u'get_attr': [u'VipMap',
                                                                         u'net_ip_map',
                                                                         {u'get_attr': [u'ServiceNetMap',
                                                                                        u'service_net_map',
                                                                                        u'AodhApiNetwork']}]}},
                           u'CeilometerInternalVip': {u'description': u'VIP for Ceilometer API internal endpoint',
                                                      u'value': {u'get_attr': [u'VipMap',
                                                                               u'net_ip_map',
                                                                               {u'get_attr': [u'ServiceNetMap',
                                                                                              u'service_net_map',
                                                                                              u'CeilometerApiNetwork']}]}},
                           u'CephRgwInternalVip': {u'description': u'VIP for Ceph RGW internal endpoint',
                                                   u'value': {u'get_attr': [u'VipMap',
                                                                            u'net_ip_map',
                                                                            {u'get_attr': [u'ServiceNetMap',
                                                                                           u'service_net_map',
                                                                                           u'CephRgwNetwork']}]}},
                           u'CinderInternalVip': {u'description': u'VIP for Cinder API internal endpoint',
                                                  u'value': {u'get_attr': [u'VipMap',
                                                                           u'net_ip_map',
                                                                           {u'get_attr': [u'ServiceNetMap',
                                                                                          u'service_net_map',
                                                                                          u'CinderApiNetwork']}]}},
                           u'EnabledServices': {u'description': u'The services enabled on each role',
                                                u'value': {u'Compute': {u'get_attr': [u'ComputeServiceChain',
                                                                                      u'role_data',
                                                                                      u'service_names']},
                                                           u'Controller': {u'get_attr': [u'ControllerServiceChain',
                                                                                         u'role_data',
                                                                                         u'service_names']}}},
                           u'EndpointMap': {u'description': u'Mapping of the resources with the needed info for their endpoints.\nThis includes the protocol used, the IP, port and also a full\nrepresentation of the URI.\n',
                                            u'value': {u'get_attr': [u'EndpointMap',
                                                                     u'endpoint_map']}},
                           u'GlanceInternalVip': {u'description': u'VIP for Glance API internal endpoint',
                                                  u'value': {u'get_attr': [u'VipMap',
                                                                           u'net_ip_map',
                                                                           {u'get_attr': [u'ServiceNetMap',
                                                                                          u'service_net_map',
                                                                                          u'GlanceApiNetwork']}]}},
                           u'GnocchiInternalVip': {u'description': u'VIP for Gnocchi API internal endpoint',
                                                   u'value': {u'get_attr': [u'VipMap',
                                                                            u'net_ip_map',
                                                                            {u'get_attr': [u'ServiceNetMap',
                                                                                           u'service_net_map',
                                                                                           u'GnocchiApiNetwork']}]}},
                           u'HeatInternalVip': {u'description': u'VIP for Heat API internal endpoint',
                                                u'value': {u'get_attr': [u'VipMap',
                                                                         u'net_ip_map',
                                                                         {u'get_attr': [u'ServiceNetMap',
                                                                                        u'service_net_map',
                                                                                        u'HeatApiNetwork']}]}},
                           u'HostsEntry': {u'description': u'The content that should be appended to your /etc/hosts if you want to get\nhostname-based access to the deployed nodes (useful for testing without\nsetting up a DNS).\n',
                                           u'value': {u'list_join': [u'\n',
                                                                     [{u'get_attr': [u'hostsConfig',
                                                                                     u'hosts_entries']}],
                                                                     [{u'str_replace': {u'params': {u'HOST': {u'get_param': u'CloudName'},
                                                                                                    u'IP': {u'get_attr': [u'VipMap',
                                                                                                                          u'net_ip_map',
                                                                                                                          u'external']}},
                                                                                        u'template': u'IP  HOST'}},
                                                                      {u'str_replace': {u'params': {u'HOST': {u'get_param': u'CloudNameCtlplane'},
                                                                                                    u'IP': {u'get_attr': [u'VipMap',
                                                                                                                          u'net_ip_map',
                                                                                                                          u'ctlplane']}},
                                                                                        u'template': u'IP  HOST'}},
                                                                      {u'str_replace': {u'params': {u'HOST': {u'get_param': u'CloudNameInternal'},
                                                                                                    u'IP': {u'get_attr': [u'VipMap',
                                                                                                                          u'net_ip_map',
                                                                                                                          u'internal_api']}},
                                                                                        u'template': u'IP  HOST'}},
                                                                      {u'str_replace': {u'params': {u'HOST': {u'get_param': u'CloudNameStorage'},
                                                                                                    u'IP': {u'get_attr': [u'VipMap',
                                                                                                                          u'net_ip_map',
                                                                                                                          u'storage']}},
                                                                                        u'template': u'IP  HOST'}},
                                                                      {u'str_replace': {u'params': {u'HOST': {u'get_param': u'CloudNameStorageManagement'},
                                                                                                    u'IP': {u'get_attr': [u'VipMap',
                                                                                                                          u'net_ip_map',
                                                                                                                          u'storage_mgmt']}},
                                                                                        u'template': u'IP  HOST'}}]]}},
                           u'IronicInternalVip': {u'description': u'VIP for Ironic API internal endpoint',
                                                  u'value': {u'get_attr': [u'VipMap',
                                                                           u'net_ip_map',
                                                                           {u'get_attr': [u'ServiceNetMap',
                                                                                          u'service_net_map',
                                                                                          u'IronicApiNetwork']}]}},
                           u'KeystoneAdminVip': {u'description': u'Keystone Admin VIP endpoint',
                                                 u'value': {u'get_attr': [u'VipMap',
                                                                          u'net_ip_map',
                                                                          {u'get_attr': [u'ServiceNetMap',
                                                                                         u'service_net_map',
                                                                                         u'KeystoneAdminApiNetwork']}]}},
                           u'KeystoneInternalVip': {u'description': u'VIP for Keystone API internal endpoint',
                                                    u'value': {u'get_attr': [u'VipMap',
                                                                             u'net_ip_map',
                                                                             {u'get_attr': [u'ServiceNetMap',
                                                                                            u'service_net_map',
                                                                                            u'KeystonePublicApiNetwork']}]}},
                           u'KeystoneURL': {u'description': u'URL for the Overcloud Keystone service',
                                            u'value': {u'get_attr': [u'EndpointMap',
                                                                     u'endpoint_map',
                                                                     u'KeystonePublic',
                                                                     u'uri']}},
                           u'ManagedEndpoints': {u'description': u'Asserts that the keystone endpoints have been provisioned.',
                                                 u'value': True},
                           u'ManilaInternalVip': {u'description': u'VIP for Manila API internal endpoint',
                                                  u'value': {u'get_attr': [u'VipMap',
                                                                           u'net_ip_map',
                                                                           {u'get_attr': [u'ServiceNetMap',
                                                                                          u'service_net_map',
                                                                                          u'ManilaApiNetwork']}]}},
                           u'NeutronInternalVip': {u'description': u'VIP for Neutron API internal endpoint',
                                                   u'value': {u'get_attr': [u'VipMap',
                                                                            u'net_ip_map',
                                                                            {u'get_attr': [u'ServiceNetMap',
                                                                                           u'service_net_map',
                                                                                           u'NeutronApiNetwork']}]}},
                           u'NovaInternalVip': {u'description': u'VIP for Nova API internal endpoint',
                                                u'value': {u'get_attr': [u'VipMap',
                                                                         u'net_ip_map',
                                                                         {u'get_attr': [u'ServiceNetMap',
                                                                                        u'service_net_map',
                                                                                        u'NovaApiNetwork']}]}},
                           u'OpenDaylightInternalVip': {u'description': u'VIP for OpenDaylight API internal endpoint',
                                                        u'value': {u'get_attr': [u'VipMap',
                                                                                 u'net_ip_map',
                                                                                 {u'get_attr': [u'ServiceNetMap',
                                                                                                u'service_net_map',
                                                                                                u'OpenDaylightApiNetwork']}]}},
                           u'PublicVip': {u'description': u'Controller VIP for public API endpoints',
                                          u'value': {u'get_attr': [u'VipMap',
                                                                   u'net_ip_map',
                                                                   u'external']}},
                           u'SaharaInternalVip': {u'description': u'VIP for Sahara API internal endpoint',
                                                  u'value': {u'get_attr': [u'VipMap',
                                                                           u'net_ip_map',
                                                                           {u'get_attr': [u'ServiceNetMap',
                                                                                          u'service_net_map',
                                                                                          u'SaharaApiNetwork']}]}},
                           u'SwiftInternalVip': {u'description': u'VIP for Swift Proxy internal endpoint',
                                                 u'value': {u'get_attr': [u'VipMap',
                                                                          u'net_ip_map',
                                                                          {u'get_attr': [u'ServiceNetMap',
                                                                                         u'service_net_map',
                                                                                         u'SwiftProxyNetwork']}]}}},
              u'parameters': {u'CloudDomain': {u'default': u'localdomain',
                                               u'description': u'The DNS domain used for the hosts. This should match the dhcp_domain configured in the Undercloud neutron. Defaults to localdomain.\n',
                                               u'type': u'string'},
                              u'CloudName': {u'default': u'overcloud.localdomain',
                                             u'description': u'The DNS name of this cloud. E.g. ci-overcloud.tripleo.org',
                                             u'type': u'string'},
                              u'CloudNameCtlplane': {u'default': u'overcloud.ctlplane.localdomain',
                                                     u'description': u"The DNS name of this cloud's storage management endpoint. E.g. 'ci-overcloud.management.tripleo.org'.\n",
                                                     u'type': u'string'},
                              u'CloudNameInternal': {u'default': u'overcloud.internalapi.localdomain',
                                                     u'description': u"The DNS name of this cloud's internal API endpoint. E.g. 'ci-overcloud.internalapi.tripleo.org'.\n",
                                                     u'type': u'string'},
                              u'CloudNameStorage': {u'default': u'overcloud.storage.localdomain',
                                                    u'description': u"The DNS name of this cloud's storage endpoint. E.g. 'ci-overcloud.storage.tripleo.org'.\n",
                                                    u'type': u'string'},
                              u'CloudNameStorageManagement': {u'default': u'overcloud.storagemgmt.localdomain',
                                                              u'description': u"The DNS name of this cloud's storage management endpoint. E.g. 'ci-overcloud.storagemgmt.tripleo.org'.\n",
                                                              u'type': u'string'},
                              u'ComputeCount': {u'default': 1,
                                                u'description': u'Number of Compute nodes to deploy',
                                                u'type': u'number'},
                              u'ComputeHostnameFormat': {u'default': u'%stackname%-novacompute-%index%',
                                                         u'description': u'Format for Compute node hostnames Note %index% is translated into the index of the node, e.g 0/1/2 etc and %stackname% is replaced with the stack name e.g overcloud\n',
                                                         u'type': u'string'},
                              u'ComputeRemovalPolicies': {u'default': [],
                                                          u'description': u"List of resources to be removed from Compute ResourceGroup when doing an update which requires removal of specific resources. Example format ComputeRemovalPolicies: [{'resource_list': ['0']}]\n",
                                                          u'type': u'json'},
                              u'ComputeServices': {u'description': u'A list of service resources (configured in the Heat resource_registry) which represent nested stacks for each service that should get installed on the Compute role.',
                                                   u'type': u'comma_delimited_list'},
                              u'ControlFixedIPs': {u'default': [],
                                                   u'description': u'Should be used for arbitrary ips.',
                                                   u'type': u'json'},
                              u'ControllerCount': {u'default': 1,
                                                   u'description': u'Number of Controller nodes to deploy',
                                                   u'type': u'number'},
                              u'ControllerHostnameFormat': {u'default': u'%stackname%-controller-%index%',
                                                            u'description': u'Format for Controller node hostnames Note %index% is translated into the index of the node, e.g 0/1/2 etc and %stackname% is replaced with the stack name e.g overcloud\n',
                                                            u'type': u'string'},
                              u'ControllerRemovalPolicies': {u'default': [],
                                                             u'description': u"List of resources to be removed from Controller ResourceGroup when doing an update which requires removal of specific resources. Example format ComputeRemovalPolicies: [{'resource_list': ['0']}]\n",
                                                             u'type': u'json'},
                              u'ControllerSchedulerHints': {u'default': {},
                                                            u'description': u'Optional scheduler hints to pass to nova',
                                                            u'type': u'json'},
                              u'ControllerServices': {u'description': u'A list of service resources (configured in the Heat resource_registry) which represent nested stacks for each service that should get installed on the Controller role.',
                                                      u'type': u'comma_delimited_list'},
                              u'DeployIdentifier': {u'default': u'',
                                                    u'description': u'Setting this to a unique value will re-run any deployment tasks which perform configuration on a Heat stack-update.\n',
                                                    u'type': u'string'},
                              u'HypervisorNeutronPhysicalBridge': {u'default': u'br-ex',
                                                                   u'description': u'An OVS bridge to create on each hypervisor. This defaults to br-ex the same as the control plane nodes, as we have a uniform configuration of the openvswitch agent. Typically should not need to be changed.\n',
                                                                   u'type': u'string'},
                              u'HypervisorNeutronPublicInterface': {u'default': u'nic1',
                                                                    u'description': u'What interface to add to the HypervisorNeutronPhysicalBridge.',
                                                                    u'type': u'string'},
                              u'InternalApiVirtualFixedIPs': {u'default': [],
                                                              u'description': u"Control the IP allocation for the InternalApiVirtualInterface port. E.g. [{'ip_address':'1.2.3.4'}]\n",
                                                              u'type': u'json'},
                              u'NeutronControlPlaneID': {u'default': u'ctlplane',
                                                         u'description': u'Neutron ID or name for ctlplane network.',
                                                         u'type': u'string'},
                              u'NeutronPublicInterface': {u'default': u'nic1',
                                                          u'description': u'What interface to bridge onto br-ex for network nodes.',
                                                          u'type': u'string'},
                              u'NovaComputeSchedulerHints': {u'default': {},
                                                             u'description': u'Optional scheduler hints to pass to nova',
                                                             u'type': u'json'},
                              u'PublicVirtualFixedIPs': {u'default': [],
                                                         u'description': u"Control the IP allocation for the PublicVirtualInterface port. E.g. [{'ip_address':'1.2.3.4'}]\n",
                                                         u'type': u'json'},
                              u'RabbitCookieSalt': {u'default': u'unset',
                                                    u'description': u'Salt for the rabbit cookie, change this to force the randomly generated rabbit cookie to change.',
                                                    u'type': u'string'},
                              u'RedisVirtualFixedIPs': {u'default': [],
                                                        u'description': u"Control the IP allocation for the virtual IP used by Redis. E.g. [{'ip_address':'1.2.3.4'}]\n",
                                                        u'type': u'json'},
                              u'ServerMetadata': {u'default': {},
                                                  u'description': u"Extra properties or metadata passed to Nova for the created nodes in the overcloud. It's accessible via the Nova metadata API.\n",
                                                  u'type': u'json'},
                              u'StorageMgmtVirtualFixedIPs': {u'default': [],
                                                              u'description': u"Control the IP allocation for the StorageMgmgVirtualInterface port. E.g. [{'ip_address':'1.2.3.4'}]\n",
                                                              u'type': u'json'},
                              u'StorageVirtualFixedIPs': {u'default': [],
                                                          u'description': u"Control the IP allocation for the StorageVirtualInterface port. E.g. [{'ip_address':'1.2.3.4'}]\n",
                                                          u'type': u'json'},
                              u'UpdateIdentifier': {u'default': u'',
                                                    u'description': u'Setting to a previously unused value during stack-update will trigger package update on all nodes\n',
                                                    u'type': u'string'}},
              u'resources': {u'AllNodesDeploySteps': {u'depends_on': [u'ControllerAllNodesDeployment',
                                                                      u'ComputeAllNodesDeployment'],
                                                      u'properties': {u'role_data': {u'Compute': {u'get_attr': [u'ComputeServiceChain',
                                                                                                                u'role_data']},
                                                                                     u'Controller': {u'get_attr': [u'ControllerServiceChain',
                                                                                                                   u'role_data']}},
                                                                      u'servers': {u'Compute': {u'get_attr': [u'Compute',
                                                                                                              u'attributes',
                                                                                                              u'nova_server_resource']},
                                                                                   u'Controller': {u'get_attr': [u'Controller',
                                                                                                                 u'attributes',
                                                                                                                 u'nova_server_resource']}}},
                                                      u'type': u'OS::TripleO::PostDeploySteps'},
                             u'AllNodesExtraConfig': {u'depends_on': [u'UpdateWorkflow',
                                                                      u'ControllerAllNodesValidationDeployment',
                                                                      u'ComputeAllNodesValidationDeployment'],
                                                      u'properties': {u'servers': {u'Compute': {u'get_attr': [u'Compute',
                                                                                                              u'attributes',
                                                                                                              u'nova_server_resource']},
                                                                                   u'Controller': {u'get_attr': [u'Controller',
                                                                                                                 u'attributes',
                                                                                                                 u'nova_server_resource']}}},
                                                      u'type': u'OS::TripleO::AllNodesExtraConfig'},
                             u'AllNodesValidationConfig': {u'properties': {u'PingTestIps': {u'list_join': [u' ',
                                                                                                           [{u'get_attr': [u'Controller',
                                                                                                                           u'resource.0.external_ip_address']},
                                                                                                            {u'get_attr': [u'Controller',
                                                                                                                           u'resource.0.internal_api_ip_address']},
                                                                                                            {u'get_attr': [u'Controller',
                                                                                                                           u'resource.0.storage_ip_address']},
                                                                                                            {u'get_attr': [u'Controller',
                                                                                                                           u'resource.0.storage_mgmt_ip_address']},
                                                                                                            {u'get_attr': [u'Controller',
                                                                                                                           u'resource.0.tenant_ip_address']},
                                                                                                            {u'get_attr': [u'Controller',
                                                                                                                           u'resource.0.management_ip_address']}]]}},
                                                           u'type': u'OS::TripleO::AllNodes::Validation'},
                             u'Compute': {u'depends_on': u'Networks',
                                          u'properties': {u'count': {u'get_param': u'ComputeCount'},
                                                          u'removal_policies': {u'get_param': u'ComputeRemovalPolicies'},
                                                          u'resource_def': {u'properties': {u'CloudDomain': {u'get_param': u'CloudDomain'},
                                                                                            u'EndpointMap': {u'get_attr': [u'EndpointMap',
                                                                                                                           u'endpoint_map']},
                                                                                            u'Hostname': {u'str_replace': {u'params': {u'%stackname%': {u'get_param': u'OS::stack_name'}},
                                                                                                                           u'template': {u'get_param': u'ComputeHostnameFormat'}}},
                                                                                            u'MonitoringSubscriptions': {u'get_attr': [u'ComputeServiceChain',
                                                                                                                                       u'role_data',
                                                                                                                                       u'monitoring_subscriptions']},
                                                                                            u'NodeIndex': u'%index%',
                                                                                            u'NovaComputeSchedulerHints': {u'get_param': u'NovaComputeSchedulerHints'},
                                                                                            u'ServiceConfigSettings': {u'map_merge': [{u'get_attr': [u'ComputeServiceChain',
                                                                                                                                                     u'role_data',
                                                                                                                                                     u'config_settings']},
                                                                                                                                      {u'get_attr': [u'ControllerServiceChain',
                                                                                                                                                     u'role_data',
                                                                                                                                                     u'global_config_settings']},
                                                                                                                                      {u'get_attr': [u'ComputeServiceChain',
                                                                                                                                                     u'role_data',
                                                                                                                                                     u'global_config_settings']},
                                                                                                                                      {u'yaql': {u'data': {u'map': {u'yaql': {u'data': [{u'get_attr': [u'ControllerServiceChain',
                                                                                                                                                                                                       u'role_data',
                                                                                                                                                                                                       u'service_config_settings']},
                                                                                                                                                                                        {u'get_attr': [u'ComputeServiceChain',
                                                                                                                                                                                                       u'role_data',
                                                                                                                                                                                                       u'service_config_settings']}],
                                                                                                                                                                              u'expression': u'$.data.where($ != null).reduce($1.mergeWith($2), {})'}},
                                                                                                                                                           u'services': {u'get_attr': [u'ComputeServiceChain',
                                                                                                                                                                                       u'role_data',
                                                                                                                                                                                       u'service_names']}},
                                                                                                                                                 u'expression': u'let(root => $) -> $.data.map.items().where($[0] in coalesce($root.data.services, [])).select($[1]).reduce($1.mergeWith($2), {})'}}]},
                                                                                            u'ServiceNames': {u'get_attr': [u'ComputeServiceChain',
                                                                                                                            u'role_data',
                                                                                                                            u'service_names']},
                                                                                            u'ServiceNetMap': {u'get_attr': [u'ServiceNetMap',
                                                                                                                             u'service_net_map']}},
                                                                            u'type': u'OS::TripleO::Compute'}},
                                          u'type': u'OS::Heat::ResourceGroup'},
                             u'ComputeAllNodesDeployment': {u'depends_on': [u'ControllerHostsDeployment',
                                                                            u'ComputeHostsDeployment'],
                                                            u'properties': {u'config': {u'get_attr': [u'allNodesConfig',
                                                                                                      u'config_id']},
                                                                            u'input_values': {u'bootstrap_nodeid': {u'yaql': {u'data': {u'get_attr': [u'Compute',
                                                                                                                                                      u'hostname']},
                                                                                                                              u'expression': u'coalesce($.data, []).first(null)'}},
                                                                                              u'bootstrap_nodeid_ip': {u'yaql': {u'data': {u'get_attr': [u'Compute',
                                                                                                                                                         u'ip_address']},
                                                                                                                                 u'expression': u'coalesce($.data, []).first(null)'}}},
                                                                            u'name': u'ComputeAllNodesDeployment',
                                                                            u'servers': {u'get_attr': [u'Compute',
                                                                                                       u'attributes',
                                                                                                       u'nova_server_resource']}},
                                                            u'type': u'OS::Heat::StructuredDeployments'},
                             u'ComputeAllNodesValidationDeployment': {u'depends_on': u'ComputeAllNodesDeployment',
                                                                      u'properties': {u'config': {u'get_resource': u'AllNodesValidationConfig'},
                                                                                      u'name': u'ComputeAllNodesValidationDeployment',
                                                                                      u'servers': {u'get_attr': [u'Compute',
                                                                                                                 u'attributes',
                                                                                                                 u'nova_server_resource']}},
                                                                      u'type': u'OS::Heat::StructuredDeployments'},
                             u'ComputeHostsDeployment': {u'properties': {u'config': {u'get_attr': [u'hostsConfig',
                                                                                                   u'config_id']},
                                                                         u'name': u'ComputeHostsDeployment',
                                                                         u'servers': {u'get_attr': [u'Compute',
                                                                                                    u'attributes',
                                                                                                    u'nova_server_resource']}},
                                                         u'type': u'OS::Heat::StructuredDeployments'},
                             u'ComputeIpListMap': {u'properties': {u'ControlPlaneIpList': {u'get_attr': [u'Compute',
                                                                                                         u'ip_address']},
                                                                   u'EnabledServices': {u'get_attr': [u'ComputeServiceChain',
                                                                                                      u'role_data',
                                                                                                      u'service_names']},
                                                                   u'ExternalIpList': {u'get_attr': [u'Compute',
                                                                                                     u'external_ip_address']},
                                                                   u'InternalApiIpList': {u'get_attr': [u'Compute',
                                                                                                        u'internal_api_ip_address']},
                                                                   u'ManagementIpList': {u'get_attr': [u'Compute',
                                                                                                       u'management_ip_address']},
                                                                   u'NetworkHostnameMap': {u'yaql': {u'data': [{u'get_attr': [u'Compute',
                                                                                                                              u'hostname_map']}],
                                                                                                     u'expression': u'dict($.data.where($ != null).flatten().selectMany($.items()).groupBy($[0], $[1], [$[0], $[1].flatten()]))'}},
                                                                   u'ServiceHostnameList': {u'get_attr': [u'Compute',
                                                                                                          u'hostname']},
                                                                   u'ServiceNetMap': {u'get_attr': [u'ServiceNetMap',
                                                                                                    u'service_net_map_lower']},
                                                                   u'StorageIpList': {u'get_attr': [u'Compute',
                                                                                                    u'storage_ip_address']},
                                                                   u'StorageMgmtIpList': {u'get_attr': [u'Compute',
                                                                                                        u'storage_mgmt_ip_address']},
                                                                   u'TenantIpList': {u'get_attr': [u'Compute',
                                                                                                   u'tenant_ip_address']}},
                                                   u'type': u'OS::TripleO::Network::Ports::NetIpListMap'},
                             u'ComputeServiceChain': {u'properties': {u'DefaultPasswords': {u'get_attr': [u'DefaultPasswords',
                                                                                                          u'passwords']},
                                                                      u'EndpointMap': {u'get_attr': [u'EndpointMap',
                                                                                                     u'endpoint_map']},
                                                                      u'ServiceNetMap': {u'get_attr': [u'ServiceNetMap',
                                                                                                       u'service_net_map']},
                                                                      u'Services': {u'get_param': u'ComputeServices'}},
                                                      u'type': u'OS::TripleO::Services'},
                             u'ControlVirtualIP': {u'depends_on': u'Networks',
                                                   u'properties': {u'fixed_ips': {u'get_param': u'ControlFixedIPs'},
                                                                   u'name': u'control_virtual_ip',
                                                                   u'network': {u'get_param': u'NeutronControlPlaneID'},
                                                                   u'replacement_policy': u'AUTO'},
                                                   u'type': u'OS::Neutron::Port'},
                             u'Controller': {u'depends_on': u'Networks',
                                             u'properties': {u'count': {u'get_param': u'ControllerCount'},
                                                             u'removal_policies': {u'get_param': u'ControllerRemovalPolicies'},
                                                             u'resource_def': {u'properties': {u'CloudDomain': {u'get_param': u'CloudDomain'},
                                                                                               u'ControllerSchedulerHints': {u'get_param': u'ControllerSchedulerHints'},
                                                                                               u'EndpointMap': {u'get_attr': [u'EndpointMap',
                                                                                                                              u'endpoint_map']},
                                                                                               u'Hostname': {u'str_replace': {u'params': {u'%stackname%': {u'get_param': u'OS::stack_name'}},
                                                                                                                              u'template': {u'get_param': u'ControllerHostnameFormat'}}},
                                                                                               u'MonitoringSubscriptions': {u'get_attr': [u'ControllerServiceChain',
                                                                                                                                          u'role_data',
                                                                                                                                          u'monitoring_subscriptions']},
                                                                                               u'NodeIndex': u'%index%',
                                                                                               u'ServiceConfigSettings': {u'map_merge': [{u'get_attr': [u'ControllerServiceChain',
                                                                                                                                                        u'role_data',
                                                                                                                                                        u'config_settings']},
                                                                                                                                         {u'get_attr': [u'ControllerServiceChain',
                                                                                                                                                        u'role_data',
                                                                                                                                                        u'global_config_settings']},
                                                                                                                                         {u'get_attr': [u'ComputeServiceChain',
                                                                                                                                                        u'role_data',
                                                                                                                                                        u'global_config_settings']},
                                                                                                                                         {u'yaql': {u'data': {u'map': {u'yaql': {u'data': [{u'get_attr': [u'ControllerServiceChain',
                                                                                                                                                                                                          u'role_data',
                                                                                                                                                                                                          u'service_config_settings']},
                                                                                                                                                                                           {u'get_attr': [u'ComputeServiceChain',
                                                                                                                                                                                                          u'role_data',
                                                                                                                                                                                                          u'service_config_settings']}],
                                                                                                                                                                                 u'expression': u'$.data.where($ != null).reduce($1.mergeWith($2), {})'}},
                                                                                                                                                              u'services': {u'get_attr': [u'ControllerServiceChain',
                                                                                                                                                                                          u'role_data',
                                                                                                                                                                                          u'service_names']}},
                                                                                                                                                    u'expression': u'let(root => $) -> $.data.map.items().where($[0] in coalesce($root.data.services, [])).select($[1]).reduce($1.mergeWith($2), {})'}}]},
                                                                                               u'ServiceNames': {u'get_attr': [u'ControllerServiceChain',
                                                                                                                               u'role_data',
                                                                                                                               u'service_names']},
                                                                                               u'ServiceNetMap': {u'get_attr': [u'ServiceNetMap',
                                                                                                                                u'service_net_map']}},
                                                                               u'type': u'OS::TripleO::Controller'}},
                                             u'type': u'OS::Heat::ResourceGroup'},
                             u'ControllerAllNodesDeployment': {u'depends_on': [u'ControllerHostsDeployment',
                                                                               u'ComputeHostsDeployment'],
                                                               u'properties': {u'config': {u'get_attr': [u'allNodesConfig',
                                                                                                         u'config_id']},
                                                                               u'input_values': {u'bootstrap_nodeid': {u'yaql': {u'data': {u'get_attr': [u'Controller',
                                                                                                                                                         u'hostname']},
                                                                                                                                 u'expression': u'coalesce($.data, []).first(null)'}},
                                                                                                 u'bootstrap_nodeid_ip': {u'yaql': {u'data': {u'get_attr': [u'Controller',
                                                                                                                                                            u'ip_address']},
                                                                                                                                    u'expression': u'coalesce($.data, []).first(null)'}}},
                                                                               u'name': u'ControllerAllNodesDeployment',
                                                                               u'servers': {u'get_attr': [u'Controller',
                                                                                                          u'attributes',
                                                                                                          u'nova_server_resource']}},
                                                               u'type': u'OS::Heat::StructuredDeployments'},
                             u'ControllerAllNodesValidationDeployment': {u'depends_on': u'ControllerAllNodesDeployment',
                                                                         u'properties': {u'config': {u'get_resource': u'AllNodesValidationConfig'},
                                                                                         u'name': u'ControllerAllNodesValidationDeployment',
                                                                                         u'servers': {u'get_attr': [u'Controller',
                                                                                                                    u'attributes',
                                                                                                                    u'nova_server_resource']}},
                                                                         u'type': u'OS::Heat::StructuredDeployments'},
                             u'ControllerHostsDeployment': {u'properties': {u'config': {u'get_attr': [u'hostsConfig',
                                                                                                      u'config_id']},
                                                                            u'name': u'ControllerHostsDeployment',
                                                                            u'servers': {u'get_attr': [u'Controller',
                                                                                                       u'attributes',
                                                                                                       u'nova_server_resource']}},
                                                            u'type': u'OS::Heat::StructuredDeployments'},
                             u'ControllerIpListMap': {u'properties': {u'ControlPlaneIpList': {u'get_attr': [u'Controller',
                                                                                                            u'ip_address']},
                                                                      u'EnabledServices': {u'get_attr': [u'ControllerServiceChain',
                                                                                                         u'role_data',
                                                                                                         u'service_names']},
                                                                      u'ExternalIpList': {u'get_attr': [u'Controller',
                                                                                                        u'external_ip_address']},
                                                                      u'InternalApiIpList': {u'get_attr': [u'Controller',
                                                                                                           u'internal_api_ip_address']},
                                                                      u'ManagementIpList': {u'get_attr': [u'Controller',
                                                                                                          u'management_ip_address']},
                                                                      u'NetworkHostnameMap': {u'yaql': {u'data': [{u'get_attr': [u'Controller',
                                                                                                                                 u'hostname_map']}],
                                                                                                        u'expression': u'dict($.data.where($ != null).flatten().selectMany($.items()).groupBy($[0], $[1], [$[0], $[1].flatten()]))'}},
                                                                      u'ServiceHostnameList': {u'get_attr': [u'Controller',
                                                                                                             u'hostname']},
                                                                      u'ServiceNetMap': {u'get_attr': [u'ServiceNetMap',
                                                                                                       u'service_net_map_lower']},
                                                                      u'StorageIpList': {u'get_attr': [u'Controller',
                                                                                                       u'storage_ip_address']},
                                                                      u'StorageMgmtIpList': {u'get_attr': [u'Controller',
                                                                                                           u'storage_mgmt_ip_address']},
                                                                      u'TenantIpList': {u'get_attr': [u'Controller',
                                                                                                      u'tenant_ip_address']}},
                                                      u'type': u'OS::TripleO::Network::Ports::NetIpListMap'},
                             u'ControllerServiceChain': {u'properties': {u'DefaultPasswords': {u'get_attr': [u'DefaultPasswords',
                                                                                                             u'passwords']},
                                                                         u'EndpointMap': {u'get_attr': [u'EndpointMap',
                                                                                                        u'endpoint_map']},
                                                                         u'ServiceNetMap': {u'get_attr': [u'ServiceNetMap',
                                                                                                          u'service_net_map']},
                                                                         u'Services': {u'get_param': u'ControllerServices'}},
                                                         u'type': u'OS::TripleO::Services'},
                             u'DefaultPasswords': {u'properties': {u'DefaultHeatAuthEncryptionKey': {u'get_attr': [u'HeatAuthEncryptionKey',
                                                                                                                   u'value']},
                                                                   u'DefaultHorizonSecret': {u'get_attr': [u'HorizonSecret',
                                                                                                           u'value']},
                                                                   u'DefaultMysqlRootPassword': {u'get_attr': [u'MysqlRootPassword',
                                                                                                               u'value']},
                                                                   u'DefaultPcsdPassword': {u'get_attr': [u'PcsdPassword',
                                                                                                          u'value']},
                                                                   u'DefaultRabbitCookie': {u'get_attr': [u'RabbitCookie',
                                                                                                          u'value']}},
                                                   u'type': u'OS::TripleO::DefaultPasswords'},
                             u'EndpointMap': {u'properties': {u'CloudEndpoints': {u'ctlplane': {u'get_param': u'CloudNameCtlplane'},
                                                                                  u'external': {u'get_param': u'CloudName'},
                                                                                  u'internal_api': {u'get_param': u'CloudNameInternal'},
                                                                                  u'storage': {u'get_param': u'CloudNameStorage'},
                                                                                  u'storage_mgmt': {u'get_param': u'CloudNameStorageManagement'}},
                                                              u'NetIpMap': {u'get_attr': [u'VipMap',
                                                                                          u'net_ip_map']},
                                                              u'ServiceNetMap': {u'get_attr': [u'ServiceNetMap',
                                                                                               u'service_net_map']}},
                                              u'type': u'OS::TripleO::EndpointMap'},
                             u'HeatAuthEncryptionKey': {u'type': u'OS::Heat::RandomString'},
                             u'HorizonSecret': {u'properties': {u'length': 10},
                                                u'type': u'OS::Heat::RandomString'},
                             u'InternalApiVirtualIP': {u'depends_on': u'Networks',
                                                       u'properties': {u'ControlPlaneIP': {u'get_attr': [u'ControlVirtualIP',
                                                                                                         u'fixed_ips',
                                                                                                         0,
                                                                                                         u'ip_address']},
                                                                       u'FixedIPs': {u'get_param': u'InternalApiVirtualFixedIPs'},
                                                                       u'PortName': u'internal_api_virtual_ip'},
                                                       u'type': u'OS::TripleO::Network::Ports::InternalApiVipPort'},
                             u'MysqlRootPassword': {u'properties': {u'length': 10},
                                                    u'type': u'OS::Heat::RandomString'},
                             u'Networks': {u'type': u'OS::TripleO::Network'},
                             u'PcsdPassword': {u'properties': {u'length': 16},
                                               u'type': u'OS::Heat::RandomString'},
                             u'PublicVirtualIP': {u'depends_on': u'Networks',
                                                  u'properties': {u'ControlPlaneIP': {u'get_attr': [u'ControlVirtualIP',
                                                                                                    u'fixed_ips',
                                                                                                    0,
                                                                                                    u'ip_address']},
                                                                  u'ControlPlaneNetwork': {u'get_param': u'NeutronControlPlaneID'},
                                                                  u'FixedIPs': {u'get_param': u'PublicVirtualFixedIPs'},
                                                                  u'PortName': u'public_virtual_ip'},
                                                  u'type': u'OS::TripleO::Network::Ports::ExternalVipPort'},
                             u'RabbitCookie': {u'properties': {u'length': 20,
                                                               u'salt': {u'get_param': u'RabbitCookieSalt'}},
                                               u'type': u'OS::Heat::RandomString'},
                             u'RedisVirtualIP': {u'depends_on': u'Networks',
                                                 u'properties': {u'ControlPlaneIP': {u'get_attr': [u'ControlVirtualIP',
                                                                                                   u'fixed_ips',
                                                                                                   0,
                                                                                                   u'ip_address']},
                                                                 u'ControlPlaneNetwork': {u'get_param': u'NeutronControlPlaneID'},
                                                                 u'FixedIPs': {u'get_param': u'RedisVirtualFixedIPs'},
                                                                 u'NetworkName': {u'get_attr': [u'ServiceNetMap',
                                                                                                u'service_net_map',
                                                                                                u'RedisNetwork']},
                                                                 u'PortName': u'redis_virtual_ip',
                                                                 u'ServiceName': u'redis'},
                                                 u'type': u'OS::TripleO::Network::Ports::RedisVipPort'},
                             u'ServiceNetMap': {u'type': u'OS::TripleO::ServiceNetMap'},
                             u'StorageMgmtVirtualIP': {u'depends_on': u'Networks',
                                                       u'properties': {u'ControlPlaneIP': {u'get_attr': [u'ControlVirtualIP',
                                                                                                         u'fixed_ips',
                                                                                                         0,
                                                                                                         u'ip_address']},
                                                                       u'FixedIPs': {u'get_param': u'StorageMgmtVirtualFixedIPs'},
                                                                       u'PortName': u'storage_management_virtual_ip'},
                                                       u'type': u'OS::TripleO::Network::Ports::StorageMgmtVipPort'},
                             u'StorageVirtualIP': {u'depends_on': u'Networks',
                                                   u'properties': {u'ControlPlaneIP': {u'get_attr': [u'ControlVirtualIP',
                                                                                                     u'fixed_ips',
                                                                                                     0,
                                                                                                     u'ip_address']},
                                                                   u'FixedIPs': {u'get_param': u'StorageVirtualFixedIPs'},
                                                                   u'PortName': u'storage_virtual_ip'},
                                                   u'type': u'OS::TripleO::Network::Ports::StorageVipPort'},
                             u'UpdateWorkflow': {u'depends_on': [u'ControllerAllNodesDeployment',
                                                                 u'ComputeAllNodesDeployment'],
                                                 u'properties': {u'input_values': {u'deploy_identifier': {u'get_param': u'DeployIdentifier'},
                                                                                   u'update_identifier': {u'get_param': u'UpdateIdentifier'}},
                                                                 u'servers': {u'Compute': {u'get_attr': [u'Compute',
                                                                                                         u'attributes',
                                                                                                         u'nova_server_resource']},
                                                                              u'Controller': {u'get_attr': [u'Controller',
                                                                                                            u'attributes',
                                                                                                            u'nova_server_resource']}}},
                                                 u'type': u'OS::TripleO::Tasks::UpdateWorkflow'},
                             u'VipMap': {u'properties': {u'ControlPlaneIp': {u'get_attr': [u'ControlVirtualIP',
                                                                                           u'fixed_ips',
                                                                                           0,
                                                                                           u'ip_address']},
                                                         u'ExternalIp': {u'get_attr': [u'PublicVirtualIP',
                                                                                       u'ip_address']},
                                                         u'ExternalIpUri': {u'get_attr': [u'PublicVirtualIP',
                                                                                          u'ip_address_uri']},
                                                         u'InternalApiIp': {u'get_attr': [u'InternalApiVirtualIP',
                                                                                          u'ip_address']},
                                                         u'InternalApiIpUri': {u'get_attr': [u'InternalApiVirtualIP',
                                                                                             u'ip_address_uri']},
                                                         u'StorageIp': {u'get_attr': [u'StorageVirtualIP',
                                                                                      u'ip_address']},
                                                         u'StorageIpUri': {u'get_attr': [u'StorageVirtualIP',
                                                                                         u'ip_address_uri']},
                                                         u'StorageMgmtIp': {u'get_attr': [u'StorageMgmtVirtualIP',
                                                                                          u'ip_address']},
                                                         u'StorageMgmtIpUri': {u'get_attr': [u'StorageMgmtVirtualIP',
                                                                                             u'ip_address_uri']}},
                                         u'type': u'OS::TripleO::Network::Ports::NetVipMap'},
                             u'allNodesConfig': {u'properties': {u'DeployIdentifier': {u'get_param': u'DeployIdentifier'},
                                                                 u'NetVipMap': {u'get_attr': [u'VipMap',
                                                                                              u'net_ip_map']},
                                                                 u'RedisVirtualIP': {u'get_attr': [u'RedisVirtualIP',
                                                                                                   u'ip_address']},
                                                                 u'ServiceNetMap': {u'get_attr': [u'ServiceNetMap',
                                                                                                  u'service_net_map_lower']},
                                                                 u'UpdateIdentifier': {u'get_param': u'UpdateIdentifier'},
                                                                 u'cloud_name_ctlplane': {u'get_param': u'CloudNameCtlplane'},
                                                                 u'cloud_name_external': {u'get_param': u'CloudName'},
                                                                 u'cloud_name_internal_api': {u'get_param': u'CloudNameInternal'},
                                                                 u'cloud_name_storage': {u'get_param': u'CloudNameStorage'},
                                                                 u'cloud_name_storage_mgmt': {u'get_param': u'CloudNameStorageManagement'},
                                                                 u'controller_ips': {u'get_attr': [u'Controller',
                                                                                                   u'ip_address']},
                                                                 u'controller_names': {u'get_attr': [u'Controller',
                                                                                                     u'hostname']},
                                                                 u'enabled_services': {u'list_join': [u',',
                                                                                                      {u'get_attr': [u'ControllerServiceChain',
                                                                                                                     u'role_data',
                                                                                                                     u'service_names']},
                                                                                                      {u'get_attr': [u'ComputeServiceChain',
                                                                                                                     u'role_data',
                                                                                                                     u'service_names']}]},
                                                                 u'logging_groups': {u'yaql': {u'data': {u'groups': [{u'get_attr': [u'ControllerServiceChain',
                                                                                                                                    u'role_data',
                                                                                                                                    u'logging_groups']},
                                                                                                                     {u'get_attr': [u'ComputeServiceChain',
                                                                                                                                    u'role_data',
                                                                                                                                    u'logging_groups']}]},
                                                                                               u'expression': u'$.data.groups.flatten()\n'}},
                                                                 u'logging_sources': {u'yaql': {u'data': {u'sources': [{u'get_attr': [u'ControllerServiceChain',
                                                                                                                                      u'role_data',
                                                                                                                                      u'logging_sources']},
                                                                                                                       {u'get_attr': [u'ComputeServiceChain',
                                                                                                                                      u'role_data',
                                                                                                                                      u'logging_sources']}]},
                                                                                                u'expression': u'$.data.sources.flatten()\n'}},
                                                                 u'memcache_node_ips': {u'get_attr': [u'ControllerIpListMap',
                                                                                                      u'net_ip_map',
                                                                                                      {u'get_attr': [u'ServiceNetMap',
                                                                                                                     u'service_net_map',
                                                                                                                     u'MemcachedNetwork']}]},
                                                                 u'service_ips': {u'yaql': {u'data': {u'l': [{u'get_attr': [u'ControllerIpListMap',
                                                                                                                            u'service_ips']},
                                                                                                             {u'get_attr': [u'ComputeIpListMap',
                                                                                                                            u'service_ips']}]},
                                                                                            u'expression': u'dict($.data.l.where($ != null).selectMany($.items()).groupBy($[0], $[1], [$[0], $[1].flatten()]))'}},
                                                                 u'service_node_names': {u'yaql': {u'data': {u'l': [{u'get_attr': [u'ControllerIpListMap',
                                                                                                                                   u'service_hostnames']},
                                                                                                                    {u'get_attr': [u'ComputeIpListMap',
                                                                                                                                   u'service_hostnames']}]},
                                                                                                   u'expression': u'dict($.data.l.where($ != null).selectMany($.items()).groupBy($[0], $[1], [$[0], $[1].flatten()]))'}},
                                                                 u'short_service_node_names': {u'yaql': {u'data': {u'l': [{u'get_attr': [u'ControllerIpListMap',
                                                                                                                                         u'short_service_hostnames']},
                                                                                                                          {u'get_attr': [u'ComputeIpListMap',
                                                                                                                                         u'short_service_hostnames']}]},
                                                                                                         u'expression': u'dict($.data.l.where($ != null).selectMany($.items()).groupBy($[0], $[1], [$[0], $[1].flatten()]))'}}},
                                                 u'type': u'OS::TripleO::AllNodes::SoftwareConfig'},
                             u'hostsConfig': {u'properties': {u'hosts': [{u'list_join': [u'\\n',
                                                                                         {u'get_attr': [u'Controller',
                                                                                                        u'hosts_entry']}]},
                                                                         {u'list_join': [u'\\n',
                                                                                         {u'get_attr': [u'Compute',
                                                                                                        u'hosts_entry']}]}]},
                                              u'type': u'OS::TripleO::Hosts::SoftwareConfig'}}},
 'timeout_mins': 240}
(Pdb)
```